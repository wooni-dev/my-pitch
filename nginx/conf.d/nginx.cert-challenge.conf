# 인증서 발급용 도메인 챌린지 처리 설정
# upstream 없이 certbot의 acme-challenge만 처리

server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _;

    # Let's Encrypt 챌린지 경로
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # 나머지 요청은 200 응답
    location / {
        return 200 "Let's Encrypt certification in progress...\n";
        add_header Content-Type text/plain;
    }
}

